I"‰$<h2 id="ê°œìš”">ê°œìš”</h2>
<p>node.js ì— ê¸°ë³¸ íƒ‘ì¬ë˜ì–´ìˆëŠ” http ëª¨ë“ˆì„ ì´ìš©í•´ http.ClientRequest ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ë°ì´í„°ë¥¼ ë¶™ì—¬ ì „ì†¡í•˜ëŠ” ë°©ë²•ì„ ë‹¤ë£¹ë‹ˆë‹¤.</p>
<ol>
  <li><a href="#stepA">request ìƒì„±í•˜ê¸°</a></li>
  <li><a href="#stepB">ë°ì´í„° ë° request ì „ì†¡</a></li>
  <li><a href="#stepC">response ì²˜ë¦¬</a></li>
</ol>

<p><a href="https://nodejs.org/dist/latest-v14.x/docs/api/http.html">node.js ë¬¸ì„œ</a>ë¥¼ ì°¸ê³ í•˜ë©° ì‘ì„±í–ˆìŠµë‹ˆë‹¤.</p>

<h2 id="1-clientrequest-ìƒì„±"><a name="stepA">1. ClientRequest ìƒì„±</a></h2>
<p><code class="language-plaintext highlighter-rouge">http.request(url[,options][,callback])</code>ê³¼ <code class="language-plaintext highlighter-rouge">http.request(options[,callback])</code>í•¨ìˆ˜ì˜ ë°˜í™˜ê°’ì„ í†µí•´ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<p><code class="language-plaintext highlighter-rouge">option</code>íŒŒë¼ë¯¸í„°ëŠ” í—¤ë”, requestë°©ì‹ë“±ì„ ë‹´ê³  ìˆëŠ” ê°ì²´ì´ë©°<br />
<code class="language-plaintext highlighter-rouge">callback</code>ì€ í•´ë‹¹ requestì— ëŒ€í•œ ì„œë²„ì˜ ì‘ë‹µ(response ì´ë²¤íŠ¸ í˜¸ì¶œì‹œ)ì‹œ í˜¸ì¶œë˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤.</p>

<p>postìš”ì²­ ì˜ˆì‹œ</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">http</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">http</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{...}</span>
<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">POST</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
        <span class="dl">'</span><span class="s1">Content-Type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/x-www-form-urlencoded;charset=utf-8</span><span class="dl">'</span><span class="p">,</span>
        <span class="dl">'</span><span class="s1">Content-Length</span><span class="dl">'</span><span class="p">:</span> <span class="nx">Buffer</span><span class="p">.</span><span class="nx">byteLength</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="kd">const</span> <span class="nx">req</span> <span class="o">=</span> <span class="nx">http</span><span class="p">.</span><span class="nx">request</span><span class="p">(</span><span class="dl">"</span><span class="s2">https://example.com</span><span class="dl">"</span><span class="p">,</span> <span class="nx">options</span><span class="p">,</span> <span class="p">()</span><span class="o">=&gt;</span><span class="p">{});</span>
</code></pre></div></div>
<h2 id="2-ë°ì´í„°ë¥¼-ë¶™ì—¬-ì „ì†¡í•˜ê¸°"><a name="stepB">2. ë°ì´í„°ë¥¼ ë¶™ì—¬ ì „ì†¡í•˜ê¸°</a></h2>
<p><code class="language-plaintext highlighter-rouge">ClientRequest.end([data[,encoding]][,callback])</code>ë¥¼ í†µí•´ ì „ì†¡ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>

<p>íŒŒë¼ë¯¸í„°ì¸ <code class="language-plaintext highlighter-rouge">data</code>ëŠ” ë¬¸ìì—´ì´ê³  <code class="language-plaintext highlighter-rouge">callback</code>ì€ ì „ì†¡ì´ ëë‚¬ì„ë•Œ í˜¸ì¶œë˜ëŠ” í•¨ìˆ˜ ì…ë‹ˆë‹¤.</p>

<p><code class="language-plaintext highlighter-rouge">ClientRequest.end()</code>ì— ë¬¸ìì—´í™” ëœ dataë¥¼ ë„£ì–´ ì‹¤í–‰ ì‹œí‚¤ë©´ í…Œì´í„°ë¥¼ ë¶™ì—¬ ì „ì†¡í•˜ê²Œ ë©ë‹ˆë‹¤.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="kd">const</span> <span class="nx">http</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">http</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
    <span class="na">data</span><span class="p">:</span> <span class="dl">"</span><span class="s2">hello</span><span class="dl">"</span>
<span class="p">});</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">POST</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
        <span class="dl">'</span><span class="s1">Content-Type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/x-www-form-urlencoded;charset=utf-8</span><span class="dl">'</span><span class="p">,</span>
        <span class="dl">'</span><span class="s1">Content-Length</span><span class="dl">'</span><span class="p">:</span> <span class="nx">Buffer</span><span class="p">.</span><span class="nx">byteLength</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="kd">const</span> <span class="nx">req</span> <span class="o">=</span> <span class="nx">http</span><span class="p">.</span><span class="nx">request</span><span class="p">(</span><span class="dl">"</span><span class="s2">https://example.com</span><span class="dl">"</span><span class="p">,</span> <span class="nx">options</span><span class="p">,</span> <span class="p">(</span><span class="nx">res</span><span class="p">)</span><span class="o">=&gt;</span><span class="p">{});</span>

<span class="nx">req</span><span class="p">.</span><span class="nx">end</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
</code></pre></div></div>

<h2 id="3-response-ë°›ê¸°"><a name="stepC">3. response ë°›ê¸°</a></h2>
<p><a href="stepA">ì•ì—ì„œ</a>ì„¤ëª…í–ˆë“¯ì´ <code class="language-plaintext highlighter-rouge">http.request()</code>ì˜ ë§ˆì§€ë§‰ íŒŒë¼ë¯¸í„°ë¥¼ í†µí•´ response ì´ë²¤íŠ¸ ë°œìƒì‹œ ê°ì²´ë¥¼ ì–»ì„ ìˆ˜ ìˆë‹¤.<br />
ì´ë•Œ ê°ì²´ëŠ” `http.IncomingMessageâ€™í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ì´ë‹¤.<br />
ìì„¸í•œ ë‚´ìš©ì€ <a href="https://nodejs.org/dist/latest-v14.x/docs/api/http.html#http_class_http_incomingmessage">api ì°¸ì¡°</a></p>

<p>ì´ ê°ì²´ë¥¼ í†µí•´ì„œ ì„œë²„ë¡œë¶€í„° ë°›ì€ ë°ì´í„°ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="kd">const</span> <span class="nx">http</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">http</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
    <span class="na">data</span><span class="p">:</span> <span class="dl">"</span><span class="s2">hello</span><span class="dl">"</span>
<span class="p">});</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">POST</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
        <span class="dl">'</span><span class="s1">Content-Type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/x-www-form-urlencoded;charset=utf-8</span><span class="dl">'</span><span class="p">,</span>
        <span class="dl">'</span><span class="s1">Content-Length</span><span class="dl">'</span><span class="p">:</span> <span class="nx">Buffer</span><span class="p">.</span><span class="nx">byteLength</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="kd">const</span> <span class="nx">req</span> <span class="o">=</span> <span class="nx">http</span><span class="p">.</span><span class="nx">request</span><span class="p">(</span><span class="dl">"</span><span class="s2">https://example.com</span><span class="dl">"</span><span class="p">,</span> <span class="nx">options</span><span class="p">,</span>
    <span class="p">(</span><span class="nx">res</span><span class="p">)</span><span class="o">=&gt;</span><span class="p">{</span>
       <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">mydata</span><span class="p">);</span>
    <span class="p">});</span>

<span class="nx">req</span><span class="p">.</span><span class="nx">end</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
</code></pre></div></div>

:ET